<html>
<head>
    <title>OTP Login via SMS</title>
</head>
<body>
    <h2>Login with OTP (SMS)</h2>

    <div>
        <center><label>Phone Number:</label><center>      <input type="text" id="phone" placeholder="e.g. 9876543210">
        <button onclick="sendOTP()">Send OTP</button>
    </div>

    <div style="margin-top: 20px;">
       <center><label>Enter OTP:</label><\center>
        <input type="text" id="otp" placeholder="Enter OTP">
        <button onclick="verifyOTP()">Verify OTP</button>
    </div>

    <p id="response" style="color: rgb(128, 0, 105);"></p>

    <script>
        async function sendOTP() {
            const phone = document.getElementById("phone").value;

            const res = await fetch('http://localhost:5000/send-otp', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ phone })
            });

            const data = await res.json();
            document.getElementById("response").innerText = data.message || data.error;
        }

        async function verifyOTP() {
            const phone = document.getElementById("phone").value;
            const otp = document.getElementById("otp").value;

            const res = await fetch('http://localhost:5000/verify-otp', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ phone, otp })
            });

            const data = await res.json();
            document.getElementById("response").innerText = data.message || data.error;
        }
    </script>
</body>
</html>